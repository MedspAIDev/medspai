<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Start your complimentary 14-day trial of MedspAI's AI receptionist. We'll set everything up so you can experience how it handles real callers without risk.">
  <title>Start Your 14-Day Free Trial | MedspAI</title>
  <link rel="stylesheet" href="/style.css?v=23">
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="nav-container">
      <a href="/" class="logo" aria-label="MedspAI Home">
        <img src="/horizontal-medspai-no-tagline.png" alt="MedspAI" class="logo-img">
      </a>
      <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-navigation" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="nav-toggle-bars" aria-hidden="true">
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
        </span>
      </button>
      <div class="nav-menu" id="primary-navigation">
        <nav class="site-nav" aria-label="Primary Navigation">
          <a href="/#services" class="nav-link">Services</a>
          <a href="/#approach" class="nav-link">How It Works</a>
          <a href="/#results" class="nav-link">Results</a>
          <a href="/#pricing" class="nav-link">Pricing</a>
          <a href="/#cta" class="nav-link">Talk to Us</a>
        </nav>
        <div class="header-cta">
          <a href="/portal/" class="btn tertiary-btn header-portal">Client Portal</a>
          <a href="/demo/" class="btn primary-btn">Schedule Custom Demo</a>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="page-hero free-trial-hero">
      <div class="page-hero-inner free-trial-hero-inner">
        <h1>Start Your 14-Day Free Trial</h1>
        <p class="free-trial-subheading">We’re so confident you’ll love your AI receptionist that we'll install it free for 14 days</p>
      </div>
    </section>

    <section class="free-trial-form-section" aria-labelledby="free-trial-form-heading">
      <div class="free-trial-form-container">
        <div class="free-trial-form-card">
          <h2 id="free-trial-form-heading" class="sr-only">Free Trial Sign-Up</h2>
          <div class="free-trial-progress" aria-hidden="false" aria-label="Free trial steps">
            <ol class="step-indicator" role="list">
              <li class="step-indicator-item is-active" data-step="1">
                <span class="step-indicator-count" aria-hidden="true">1</span>
                <span class="step-indicator-label">Practice Details</span>
              </li>
              <li class="step-indicator-item" data-step="2">
                <span class="step-indicator-count" aria-hidden="true">2</span>
                <span class="step-indicator-label">Trial Settings</span>
              </li>
              <li class="step-indicator-item" data-step="3">
                <span class="step-indicator-count" aria-hidden="true">3</span>
                <span class="step-indicator-label">Start Date</span>
              </li>
            </ol>
          </div>

          <form class="multi-step-form" data-current-step="1" aria-live="polite" novalidate>
            <div class="step-panels">
              <section class="step-panel is-active" data-step="1" aria-labelledby="step-heading-1">
                <header class="step-header">
                  <p class="step-overline">Step 1</p>
                  <h2 id="step-heading-1">Practice Details</h2>
                </header>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="practice_name">Practice name <span aria-hidden="true">*</span></label>
                    <input id="practice_name" name="practice_name" type="text" required autocomplete="organization" spellcheck="false" aria-describedby="practice_name_error">
                    <p class="field-error" id="practice_name_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="city">City <span aria-hidden="true">*</span></label>
                    <input id="city" name="city" type="text" required autocomplete="address-level2" spellcheck="false" aria-describedby="city_error">
                    <p class="field-error" id="city_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="monthly_revenue">Monthly revenue <span aria-hidden="true">*</span></label>
                    <select id="monthly_revenue" name="monthly_revenue" required aria-describedby="monthly_revenue_error">
                      <option value="" disabled selected>Select a revenue range</option>
                      <option value="Less than $50,000">Less than $50,000</option>
                      <option value="$50,000-$100,000">$50,000-$100,000</option>
                      <option value="$100,000-$150,000">$100,000-$150,000</option>
                      <option value="$150,000-$250,000">$150,000-$250,000</option>
                      <option value="$250,000+">$250,000+</option>
                    </select>
                    <p class="field-error" id="monthly_revenue_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="role">Your role <span aria-hidden="true">*</span></label>
                    <select id="role" name="role" required aria-describedby="role_error">
                      <option value="" disabled selected>Select your role</option>
                      <option value="Owner">Owner</option>
                      <option value="Practice Manager">Practice Manager</option>
                      <option value="Front Desk / Reception">Front Desk / Reception</option>
                      <option value="Marketing Agency / Consultant">Marketing Agency / Consultant</option>
                      <option value="Other">Other</option>
                    </select>
                    <p class="field-error" id="role_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="email">Best contact email <span aria-hidden="true">*</span></label>
                    <input id="email" name="email" type="email" required autocomplete="email" spellcheck="false" aria-describedby="email_error">
                    <p class="field-error" id="email_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="phone">Best phone number <span aria-hidden="true">*</span></label>
                    <input id="phone" name="phone" type="tel" required autocomplete="tel" aria-describedby="phone_error">
                    <p class="field-error" id="phone_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="daily_call_volume">How many inbound calls does your med spa get on a typical day? <span class="optional">(Optional)</span></label>
                    <select id="daily_call_volume" name="daily_call_volume" aria-describedby="daily_call_volume_error">
                      <option value="" selected>Select a range</option>
                      <option value="Under 10">Under 10</option>
                      <option value="10–25">10–25</option>
                      <option value="25–50">25–50</option>
                      <option value="50+">50+</option>
                    </select>
                    <p class="field-error" id="daily_call_volume_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="website">Website URL <span class="optional">(Optional)</span></label>
                    <input id="website" name="website" type="text" inputmode="url" autocomplete="url" spellcheck="false" aria-describedby="website_error">
                    <p class="field-error" id="website_error" aria-live="polite" hidden></p>
                  </div>
                </div>
                <div class="step-actions step-actions-single">
                  <button class="btn primary-btn step-next" type="button" data-step-action="next" disabled>Next</button>
                </div>
              </section>

              <section class="step-panel" data-step="2" aria-labelledby="step-heading-2" aria-hidden="true">
                <header class="step-header">
                  <p class="step-overline">Step 2</p>
                  <h2 id="step-heading-2">Trial Settings</h2>
                </header>
                <p>We keep the trial simple: you’ll get up to 14 days or 100 receptionist minutes of real coverage so you can see the direct impact MedspAI Receptionists have.</p>
                <div class="form-stack">
                  <div class="form-checkbox-group">
                    <div class="checkbox-field">
                      <input id="accepts_trial_limit" name="accepts_trial_limit" type="checkbox" required aria-describedby="accepts_trial_limit_error">
                      <label for="accepts_trial_limit">I understand the trial lasts up to 14 days or 100 receptionist minutes, whichever comes first.</label>
                    </div>
                    <p class="field-error" id="accepts_trial_limit_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-checkbox-group">
                    <div class="checkbox-field">
                      <input id="accepts_billing_after_trial" name="accepts_billing_after_trial" type="checkbox" required aria-describedby="accepts_billing_after_trial_error">
                      <label for="accepts_billing_after_trial">I understand that billing will only begin after the free trial if I decide to continue with the service.</label>
                    </div>
                    <p class="field-error" id="accepts_billing_after_trial_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="phone_system">Current phone system / provider <span class="optional">(Optional)</span></label>
                    <input id="phone_system" name="phone_system" type="text" autocomplete="off" spellcheck="false" aria-describedby="phone_system_error">
                    <p class="field-error" id="phone_system_error" aria-live="polite" hidden></p>
                  </div>
                  <div class="form-field">
                    <label for="call_handling_notes">How do you currently handle missed calls? <span class="optional">(Optional)</span></label>
                    <textarea id="call_handling_notes" name="call_handling_notes" rows="4" aria-describedby="call_handling_notes_error"></textarea>
                    <p class="field-error" id="call_handling_notes_error" aria-live="polite" hidden></p>
                  </div>
                </div>
                <div class="step-actions">
                  <button class="btn tertiary-btn step-back" type="button" data-step-action="back">Back</button>
                  <button class="btn primary-btn step-next" type="button" data-step-action="next">Start My Free Trial</button>
                </div>
              </section>

              <section class="step-panel" data-step="3" aria-labelledby="step-heading-3" aria-hidden="true">
                <header class="step-header">
                  <p class="step-overline">Step 3</p>
                  <h2 id="step-heading-3">Start Date</h2>
                </header>
                <p>We'll meet briefly to design and implement your custom agent. Same-day set-up guaranteed or we'll extend your trial.</p>
                <div class="calendly-embed">
                  <!-- Calendly inline widget begin -->
                  <div class="calendly-inline-widget" data-url="https://calendly.com/team-medspai/discovery-call" style="min-width:320px;height:700px;"></div>
                  <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
                  <!-- Calendly inline widget end -->
                </div>
              </section>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="/MedspAI Transparent Horizontal White Letters.png" alt="MedspAI" class="footer-logo">
        <p>MedspAI is the embedded AI team for med spas ready to deliver uninterrupted patient service.</p>
      </div>
      <div class="footer-cta">
        <h4>Ready when your phones light up</h4>
        <p>Call <a href="tel:+11234567890">+1 (123) 456-7890</a> or schedule a custom demo to see coverage in action.</p>
        <a href="/demo/" class="btn secondary-btn">Schedule Custom Demo</a>
      </div>
      <div class="footer-links">
        <div>
          <h4>Explore</h4>
          <a href="/#services">Services</a>
          <a href="/#approach">Approach</a>
          <a href="/#results">Results</a>
          <a href="/#pricing">Pricing</a>
        </div>
        <div>
          <h4>Resources</h4>
          <a href="/case-study/">Case Study</a>
          <a href="/features/">Product Features</a>
          <a href="/blog/">Insights</a>
          <a href="/social-media/">Social Media Kit</a>
        </div>
        <div>
          <h4>Company</h4>
          <a href="/privacy/">Privacy Policy</a>
          <a href="/terms/">Terms of Service</a>
          <a href="/thank-you/">Contact</a>
        </div>
      </div>
    </div>
    <p class="footer-copy">© <span id="year"></span> MedspAI. All rights reserved.</p>
  </footer>

  <script>
    (function () {
      const header = document.querySelector('.site-header');
      const toggle = header ? header.querySelector('.nav-toggle') : null;
      const navMenu = header ? header.querySelector('.nav-menu') : null;
      const mobileBreakpoint = window.matchMedia('(max-width: 959px)');

      if (!header || !toggle || !navMenu) {
        return;
      }

      const updateAriaHidden = () => {
        if (mobileBreakpoint.matches) {
          navMenu.setAttribute('aria-hidden', header.classList.contains('nav-open') ? 'false' : 'true');
        } else {
          navMenu.setAttribute('aria-hidden', 'false');
        }
      };

      const closeMenu = () => {
        header.classList.remove('nav-open');
        toggle.setAttribute('aria-expanded', 'false');
        document.body.classList.remove('nav-locked');
        updateAriaHidden();
      };

      const openMenu = () => {
        header.classList.add('nav-open');
        toggle.setAttribute('aria-expanded', 'true');
        document.body.classList.add('nav-locked');
        updateAriaHidden();
      };

      toggle.addEventListener('click', () => {
        const expanded = toggle.getAttribute('aria-expanded') === 'true';
        if (expanded) {
          closeMenu();
        } else {
          openMenu();
        }
      });

      header.querySelectorAll('.nav-link').forEach((link) => {
        link.addEventListener('click', () => {
          if (mobileBreakpoint.matches) {
            closeMenu();
          }
        });
      });

      const handleBreakpointChange = () => {
        closeMenu();
        updateAriaHidden();
      };

      if (mobileBreakpoint.addEventListener) {
        mobileBreakpoint.addEventListener('change', handleBreakpointChange);
      } else if (mobileBreakpoint.addListener) {
        mobileBreakpoint.addListener(handleBreakpointChange);
      }

      document.addEventListener('keyup', (event) => {
        if (event.key === 'Escape') {
          closeMenu();
        }
      });

      updateAriaHidden();
    })();

    (function () {
      const form = document.querySelector('.multi-step-form');
      if (!form) {
        return;
      }

      const panels = Array.from(form.querySelectorAll('.step-panel'));
      const indicatorItems = Array.from(document.querySelectorAll('.step-indicator-item'));

      const stepOnePanel = form.querySelector('.step-panel[data-step="1"]');
      const stepOneFields = stepOnePanel
        ? Array.from(stepOnePanel.querySelectorAll('input, select, textarea')).filter((field) => field.name)
        : [];
      const requiredStepOneFields = stepOneFields.filter((field) => field.required);
      const stepOneNextButton = stepOnePanel
        ? stepOnePanel.querySelector('[data-step-action="next"]')
        : null;
      const stepTwoPanel = form.querySelector('.step-panel[data-step="2"]');
      const stepTwoActions = stepTwoPanel
        ? stepTwoPanel.querySelector('.step-actions')
        : null;
      const stepTwoRequiredCheckboxes = stepTwoPanel
        ? Array.from(stepTwoPanel.querySelectorAll('input[type="checkbox"][required]'))
        : [];
      const stepThreePanel = form.querySelector('.step-panel[data-step="3"]');
      const stepThreeFields = stepThreePanel
        ? Array.from(stepThreePanel.querySelectorAll('input, select, textarea')).filter((field) => field.name)
        : [];
      const stepThreeRequiredFields = stepThreeFields.filter((field) => field.required);
      const stepThreeSubmitButton = stepThreePanel
        ? stepThreePanel.querySelector('.step-submit')
        : null;
      const touchedFields = new WeakSet();
      const touchedCheckboxes = new WeakSet();

      const customMessages = {
        practice_name: 'Enter your practice name.',
        city: 'Provide your city.',
        monthly_revenue: 'Select your monthly revenue range.',
        role: 'Select the role that best describes you.',
        email: 'Enter a valid email address.',
        phone: 'Share the best phone number to reach you.',
        preferred_start_date: 'Select your preferred trial start date.',
      };

      const checkboxMessages = {
        accepts_trial_limit: 'Confirm you understand the trial limit to continue.',
        accepts_billing_after_trial: 'Confirm you can manage call forwarding during the trial.',
      };

      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      const setFieldError = (field, message) => {
        const wrapper = field.closest('.form-field');
        if (!wrapper) {
          return;
        }

        const errorEl = wrapper.querySelector('.field-error');
        if (!errorEl) {
          return;
        }

        if (message) {
          errorEl.textContent = message;
          errorEl.hidden = false;
          field.setAttribute('aria-invalid', 'true');
          wrapper.classList.add('has-error');
        } else {
          errorEl.textContent = '';
          errorEl.hidden = true;
          field.removeAttribute('aria-invalid');
          wrapper.classList.remove('has-error');
        }
      };

      const validateField = (field, { forceShow = false } = {}) => {
        const value = field.value.trim();
        let message = '';

        if (field.required) {
          if (!value) {
            message = customMessages[field.name] || 'This field is required.';
          } else if (field.type === 'email' && !emailPattern.test(value)) {
            message = customMessages[field.name] || 'Enter a valid email address.';
          }
        }

        if (!field.required && field.type === 'email' && value && !emailPattern.test(value)) {
          message = customMessages[field.name] || 'Enter a valid email address.';
        }

        if (forceShow || touchedFields.has(field) || !message) {
          setFieldError(field, message);
        }

        return message === '';
      };

      const updateStepOneButtonState = () => {
        if (!stepOneNextButton) {
          return;
        }

        const allValid = requiredStepOneFields.every((field) => validateField(field));
        stepOneNextButton.disabled = !allValid;
        stepOneNextButton.setAttribute('aria-disabled', allValid ? 'false' : 'true');
      };

      const updateStepThreeButtonState = () => {
        if (!stepThreeSubmitButton) {
          return;
        }

        const allValid = stepThreeRequiredFields.every((field) => validateField(field));
        stepThreeSubmitButton.disabled = !allValid;
        stepThreeSubmitButton.setAttribute('aria-disabled', allValid ? 'false' : 'true');
      };

      const setCheckboxError = (checkbox, message) => {
        const wrapper = checkbox.closest('.form-checkbox-group');
        if (!wrapper) {
          return;
        }

        const errorEl = wrapper.querySelector('.field-error');
        if (!errorEl) {
          return;
        }

        if (message) {
          errorEl.textContent = message;
          errorEl.hidden = false;
          checkbox.setAttribute('aria-invalid', 'true');
          wrapper.classList.add('has-error');
        } else {
          errorEl.textContent = '';
          errorEl.hidden = true;
          checkbox.removeAttribute('aria-invalid');
          wrapper.classList.remove('has-error');
        }
      };

      const validateCheckbox = (checkbox, { forceShow = false } = {}) => {
        const isChecked = checkbox.checked;
        let message = '';

        if (!isChecked) {
          message = checkboxMessages[checkbox.name] || 'This field is required.';
        }

        if (forceShow || touchedCheckboxes.has(checkbox) || isChecked) {
          setCheckboxError(checkbox, message);
        }

        return isChecked;
      };

      if (stepOnePanel) {
        stepOneFields.forEach((field) => {
          const eventName = field.tagName === 'SELECT' ? 'change' : 'input';

          field.addEventListener(eventName, () => {
            validateField(field, { forceShow: touchedFields.has(field) });
            updateStepOneButtonState();
          });

          field.addEventListener('blur', () => {
            touchedFields.add(field);
            validateField(field, { forceShow: true });
            updateStepOneButtonState();
          });
        });
      }

      if (stepTwoPanel) {
        stepTwoRequiredCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener('change', () => {
            touchedCheckboxes.add(checkbox);
            validateCheckbox(checkbox, { forceShow: true });
          });

          checkbox.addEventListener('blur', () => {
            touchedCheckboxes.add(checkbox);
            validateCheckbox(checkbox, { forceShow: true });
          });
        });
      }

      if (stepThreePanel) {
        stepThreeFields.forEach((field) => {
          const eventName = field.tagName === 'SELECT' ? 'change' : 'input';

          field.addEventListener(eventName, () => {
            validateField(field, { forceShow: touchedFields.has(field) });
            updateStepThreeButtonState();
          });

          field.addEventListener('blur', () => {
            touchedFields.add(field);
            validateField(field, { forceShow: true });
            updateStepThreeButtonState();
          });
        });
      }

      const getCurrentStep = () => Number(form.dataset.currentStep || '1');

      const updateIndicator = (currentStep) => {
        indicatorItems.forEach((item) => {
          const stepNumber = Number(item.dataset.step);
          item.classList.toggle('is-active', stepNumber === currentStep);
          item.classList.toggle('is-complete', stepNumber < currentStep);
          if (stepNumber === currentStep) {
            item.setAttribute('aria-current', 'step');
          } else {
            item.removeAttribute('aria-current');
          }
        });
      };

      const updatePanels = (currentStep) => {
        panels.forEach((panel) => {
          const panelStep = Number(panel.dataset.step);
          const isActive = panelStep === currentStep;
          panel.classList.toggle('is-active', isActive);
          panel.setAttribute('aria-hidden', isActive ? 'false' : 'true');
        });
      };

      const goToStep = (nextStep) => {
        const totalSteps = panels.length;
        const targetStep = Math.min(Math.max(nextStep, 1), totalSteps);
        form.dataset.currentStep = String(targetStep);
        updatePanels(targetStep);
        updateIndicator(targetStep);
        if (targetStep === 3) {
          updateStepThreeButtonState();
        }
      };

      const webhookUrl = 'https://services.leadconnectorhq.com/hooks/yiubPI8Z7kiAGrebVoGy/webhook-trigger/bb20e82c-a715-48e0-a6f4-a4f83fba7782';
      let hasCapturedStepOneLead = false;
      let isSubmittingFinalPayload = false;

      const getFieldValue = (name) => {
        const field = form.elements.namedItem(name);
        if (!field) {
          return '';
        }

        if (typeof RadioNodeList !== 'undefined' && field instanceof RadioNodeList) {
          if (!field.length) {
            return '';
          }

          if (field[0].type === 'checkbox') {
            return Array.from(field).some((item) => item.checked);
          }

          return field.value.trim();
        }

        if (field.type === 'checkbox') {
          return field.checked;
        }

        return field.value.trim();
      };

      const buildStepOnePayload = () => ({
        source: 'medspai_website_free_trial',
        stage: 'step1_lead_capture',
        practice_name: getFieldValue('practice_name'),
        city: getFieldValue('city'),
        revenue: getFieldValue('monthly_revenue'),
        role: getFieldValue('role'),
        email: getFieldValue('email'),
        phone: getFieldValue('phone'),
        daily_call_volume: getFieldValue('daily_call_volume'),
        website: getFieldValue('website'),
      });

      const buildFullPayload = () => ({
        source: 'medspai_website_free_trial',
        stage: 'completed_trial_signup',
        practice_name: getFieldValue('practice_name'),
        city: getFieldValue('city'),
        revenue: getFieldValue('monthly_revenue'),
        role: getFieldValue('role'),
        email: getFieldValue('email'),
        phone: getFieldValue('phone'),
        daily_call_volume: getFieldValue('daily_call_volume'),
        website: getFieldValue('website'),
        accepts_trial_limit: Boolean(getFieldValue('accepts_trial_limit')),
        accepts_billing_after_trial: Boolean(getFieldValue('accepts_billing_after_trial')),
        phone_system: getFieldValue('phone_system'),
        call_handling_notes: getFieldValue('call_handling_notes'),
        preferred_start_date: getFieldValue('preferred_start_date'),
        setup_call_time_window: getFieldValue('setup_call_time_window'),
        timezone: getFieldValue('timezone'),
        extra_notes: getFieldValue('extra_notes'),
      });

      const postPayload = async (payload) => {
        const response = await fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(payload),
        });

        if (!response.ok) {
          throw new Error(`Request failed with status ${response.status}`);
        }

        return response;
      };

      const submissionErrorEl = document.createElement('p');
      submissionErrorEl.className = 'field-error form-submit-error';
      submissionErrorEl.setAttribute('role', 'alert');
      submissionErrorEl.hidden = true;
      if (stepTwoPanel && stepTwoActions) {
        stepTwoPanel.insertBefore(submissionErrorEl, stepTwoActions);
      }

      const showSubmissionError = (message) => {
        if (!submissionErrorEl) {
          return;
        }

        submissionErrorEl.textContent = message;
        submissionErrorEl.hidden = !message;
      };

      const clearSubmissionError = () => {
        showSubmissionError('');
      };

      const formCard = document.querySelector('.free-trial-form-card');

      form.addEventListener('click', async (event) => {
        const actionButton = event.target.closest('[data-step-action]');
        if (!actionButton) {
          return;
        }

        event.preventDefault();
        const actionType = actionButton.dataset.stepAction;
        const currentStep = getCurrentStep();

        if (actionType === 'next') {
          if (currentStep === 1 && stepOnePanel) {
            let firstInvalidField = null;

            requiredStepOneFields.forEach((field) => {
              touchedFields.add(field);
              const fieldIsValid = validateField(field, { forceShow: true });
              if (!fieldIsValid && !firstInvalidField) {
                firstInvalidField = field;
              }
            });
            updateStepOneButtonState();

            if (firstInvalidField) {
              firstInvalidField.focus();
              return;
            }

            if (!hasCapturedStepOneLead) {
              const nextButton = actionButton;
              if (nextButton) {
                nextButton.disabled = true;
                nextButton.setAttribute('aria-disabled', 'true');
              }

              try {
                await postPayload(buildStepOnePayload());
                hasCapturedStepOneLead = true;
              } catch (error) {
                console.error('Failed to submit step 1 lead capture', error);
              } finally {
                if (nextButton) {
                  nextButton.disabled = false;
                  nextButton.setAttribute('aria-disabled', 'false');
                }
              }
            }
          }

          if (currentStep === 2 && stepTwoPanel) {
            let firstInvalidCheckbox = null;

            stepTwoRequiredCheckboxes.forEach((checkbox) => {
              touchedCheckboxes.add(checkbox);
              const checkboxIsValid = validateCheckbox(checkbox, { forceShow: true });
              if (!checkboxIsValid && !firstInvalidCheckbox) {
                firstInvalidCheckbox = checkbox;
              }
            });

            if (firstInvalidCheckbox) {
              firstInvalidCheckbox.focus();
              return;
            }

            const nextButton = actionButton;

            if (isSubmittingFinalPayload) {
              return;
            }

            clearSubmissionError();
            let originalButtonText = '';

            if (nextButton) {
              originalButtonText = nextButton.textContent;
              nextButton.disabled = true;
              nextButton.setAttribute('aria-disabled', 'true');
              nextButton.textContent = 'Submitting…';
            }

            isSubmittingFinalPayload = true;

            try {
              await postPayload(buildFullPayload());
            } catch (error) {
              console.error('Failed to submit completed trial signup', error);
              showSubmissionError('Something went wrong while starting your trial. Please check your connection and try again.');

              if (nextButton) {
                nextButton.disabled = false;
                nextButton.setAttribute('aria-disabled', 'false');
                nextButton.textContent = originalButtonText;
              }

              isSubmittingFinalPayload = false;
              return;
            }

            isSubmittingFinalPayload = false;

            if (nextButton) {
              nextButton.disabled = false;
              nextButton.setAttribute('aria-disabled', 'false');
              nextButton.textContent = originalButtonText;
            }
          }

          goToStep(currentStep + 1);
        } else if (actionType === 'back') {
          goToStep(currentStep - 1);
        }
      });

      form.addEventListener('submit', async (event) => {
        let firstInvalidField = null;

        stepThreeRequiredFields.forEach((field) => {
          touchedFields.add(field);
          const fieldIsValid = validateField(field, { forceShow: true });
          if (!fieldIsValid && !firstInvalidField) {
            firstInvalidField = field;
          }
        });

        updateStepThreeButtonState();

        if (firstInvalidField) {
          event.preventDefault();
          firstInvalidField.focus();
          return;
        }

        event.preventDefault();

        if (!stepThreeSubmitButton) {
          return;
        }

        clearSubmissionError();
        const originalSubmitText = stepThreeSubmitButton.textContent;
        stepThreeSubmitButton.disabled = true;
        stepThreeSubmitButton.setAttribute('aria-disabled', 'true');
        stepThreeSubmitButton.textContent = 'Submitting…';

        try {
          await postPayload(buildFullPayload());

          if (formCard) {
            const confirmation = document.createElement('div');
            confirmation.className = 'form-submission-success';
            confirmation.innerHTML = `
              <div class="submission-success-content">
                <h3>You're In!</h3>
                <p>Thanks for starting your 14-day free trial. We'll review your info, set up your AI receptionist, and reach out to confirm your trial start and setup call time.</p>
              </div>
            `;
            form.replaceWith(confirmation);
          } else {
            form.reset();
          }
        } catch (error) {
          console.error('Failed to submit completed trial signup', error);
          showSubmissionError('Something went wrong while starting your trial. Please check your connection and try again.');
          stepThreeSubmitButton.disabled = false;
          stepThreeSubmitButton.setAttribute('aria-disabled', 'false');
          stepThreeSubmitButton.textContent = originalSubmitText;
          return;
        }
      });

      goToStep(getCurrentStep());
      updateStepOneButtonState();
      updateStepThreeButtonState();
    })();

    const yearEl = document.getElementById('year');
    if (yearEl) {
      yearEl.textContent = new Date().getFullYear();
    }
  </script>
</body>
</html>
